<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reserva - Peluquer√≠a Contrasthes</title>
    <link rel="stylesheet" href="../CSS/index.css">
    <link rel="stylesheet" href="../CSS/reserva.css">
</head>
<body class="body-reserva"> 
    
    <nav class="navbar">
        <div class="container">
            <h1>‚úÇÔ∏è Contrasthes</h1>
            <ul class="nav-links">
                <li><a href="../index.html">Inicio</a></li>
            </ul>
        </div>
    </nav>

    <section class="reserva container">
        <div class="clue-stepper">
            
            <div class="step active" id="step1">
                <h3>1. ¬øCu√°ndo vienes?</h3>
                
                <div class="clue-calendar-container">
                    <div class="clue-calendar-header">
                        <select id="monthSelect" onchange="jump()"></select>
                        <select id="yearSelect" onchange="jump()"></select>
                    </div>

                    <div class="clue-calendar-grid" id="calendarGrid"></div>

                    <div class="clue-time-section">
                        <p class="time-label">¬øA qu√© hora te esperamos?</p>
                        <div class="custom-time-picker">
                            <select id="reservaHora" class="time-select"></select>
                            <span class="time-separator">:</span>
                            <select id="reservaMinuto" class="time-select">
                                <option value="00">00</option>
                                <option value="15">15</option>
                                <option value="30">30</option>
                                <option value="45">45</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="step-buttons">
                    <button type="button" class="btn-clue-next" onclick="nextStep(2)">Siguiente</button>
                </div>
            </div>

            <div class="step" id="step2" style="display:none;">
                <h3>2. Elige tu servicio</h3>
                <div class="clue-grid">
                    <label class="clue-card">
                        <input type="radio" name="servicio" value="Corte" onclick="showDesc('desc-corte')">
                        <div class="card-content">
                            <span class="icon">üíá</span>
                            <span class="label">Corte</span>
							<span class="label">y</span>
							<span class="label">Peinado</span>
                        </div>
                    </label>
                    <label class="clue-card">
                        <input type="radio" name="servicio" value="Color" onclick="showDesc('desc-color')">
                        <div class="card-content">
                            <span class="icon">üé®</span>
                            <span class="label">Color</span>
                        </div>
                    </label>
                    <label class="clue-card">
                        <input type="radio" name="servicio" value="Tratamiento" onclick="showDesc('desc-trata')">
                        <div class="card-content">
                            <span class="icon">üíÜ</span>
                            <span class="label">Tratamiento</span>
                        </div>
                    </label>
                </div>

                <div id="desc-corte" class="extra-info" style="display:none;">
                    <textarea id="notaCorte" placeholder="Detalles del corte o peinado (opcional)..."></textarea>
                </div>
                <div id="desc-color" class="extra-info" style="display:none;">
                    <textarea id="notaColor" placeholder="¬øQu√© color tienes en mente?"></textarea>
                </div>
                <div id="desc-trata" class="extra-info" style="display:none;">
                    <textarea id="notaTrata" placeholder="Especificaciones del tratamiento..."></textarea>
                </div>

                <div class="step-buttons">
                    <button type="button" class="btn-clue-prev" onclick="nextStep(1)">Atr√°s</button>
                    <button type="button" class="btn-clue-next" onclick="nextStep(3)">Siguiente</button>
                </div>
            </div>

            <div class="step" id="step3" style="display:none;">
                <h3>3. Tus datos</h3>
                <input type="text" id="nombreCliente" placeholder="Nombre completo" class="clue-input-inline" required>
                <input type="tel" id="telCliente" placeholder="Tu tel√©fono" class="clue-input-inline" required>
                
                <div class="step-buttons">
                    <button type="button" class="btn-clue-prev" onclick="nextStep(2)">Atr√°s</button>
                    <button type="button" class="btn-guardar-clue" onclick="finalizarReserva(event)">Confirmar Cita</button>
                </div>
            </div>

            <div class="atencion-especial">
                <p>‚ú® ¬øDudas con tu reserva o necesitas algo m√°s espec√≠fico? ‚ú®</p>
                <a href="tel:+34612345678">Ll√°manos al +34 612 345 678</a>
            </div>
        </div>
    </section>

    <footer class="footer">
        <p>&copy; 2026 Peluquer√≠a Contrasthes. Todos los derechos reservados.</p>
    </footer>

    <script>
        // --- NAVEGACI√ìN Y VALIDACI√ìN ---
        function nextStep(step) {
            // Validar antes de avanzar al Paso 2
            if (step === 2 && !validarPaso1()) return;
            
            // Validar antes de avanzar al Paso 3
            if (step === 3 && !validarPaso2()) return;

            // Cambiar de vista
            document.querySelectorAll('.step').forEach(s => s.style.display = 'none');
            const target = document.getElementById('step' + step);
            target.style.display = 'block';
            
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function validarPaso1() {
            const diaSeleccionado = document.querySelector('.day.selected');
            if (!diaSeleccionado) {
                alert("Por favor, selecciona qu√© d√≠a quieres venir en el calendario. üìÖ");
                return false;
            }
            return true;
        }

        function validarPaso2() {
            const servicio = document.querySelector('input[name="servicio"]:checked');
            if (!servicio) {
                alert("¬°Casi terminas! Pero primero debes elegir un servicio. üíá");
                return false;
            }
            return true;
        }

        function finalizarReserva(event) {
            const nombre = document.getElementById('nombreCliente').value.trim();
            const tel = document.getElementById('telCliente').value.trim();

            if (nombre === "" || tel === "") {
                alert("Necesitamos tu nombre y tel√©fono para confirmar la cita. üì±");
                return;
            }

            // Aqu√≠ puedes a√±adir la l√≥gica para enviar los datos a un servidor o WhatsApp
            alert("¬°Perfecto, " + nombre + "! Tu cita ha sido recibida. Nos vemos pronto en Contrasthes. ‚ú®");
            // window.location.href = "../index.html"; // Redirigir al inicio tras el √©xito
        }

        function showDesc(id) {
            document.querySelectorAll('.extra-info').forEach(d => d.style.display = 'none');
            document.getElementById(id).style.display = 'block';
        }

        // --- L√ìGICA DEL CALENDARIO ---
        let today = new Date();
        let currentMonth = today.getMonth();
        let currentYear = today.getFullYear();
        const months = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];

        function initApp() {
            let mSelect = document.getElementById("monthSelect");
            let ySelect = document.getElementById("yearSelect");
            let hSelect = document.getElementById("reservaHora");

            months.forEach((m, i) => {
                mSelect.innerHTML += `<option value="${i}" ${i === currentMonth ? 'selected' : ''}>${m}</option>`;
            });

            for (let i = currentYear; i <= currentYear + 2; i++) {
                ySelect.innerHTML += `<option value="${i}">${i}</option>`;
            }

            for (let i = 9; i <= 20; i++) {
                let h = i < 10 ? '0' + i : i;
                hSelect.innerHTML += `<option value="${h}">${h}</option>`;
            }

            renderCalendar(currentMonth, currentYear);
        }

        function renderCalendar(month, year) {
            let grid = document.getElementById("calendarGrid");
            grid.innerHTML = "";
            
            ['L','M','X','J','V','S','D'].forEach(d => grid.innerHTML += `<div class="day-name">${d}</div>`);

            let firstDay = (new Date(year, month)).getDay();
            let daysInMonth = 32 - new Date(year, month, 32).getDate();
            let adjFirstDay = (firstDay === 0) ? 6 : firstDay - 1;

            for (let i = 0; i < adjFirstDay; i++) {
                grid.innerHTML += `<div class="day empty"></div>`;
            }

            for (let i = 1; i <= daysInMonth; i++) {
                grid.innerHTML += `<div class="day" onclick="selectDay(this)">${i}</div>`;
            }
        }

        function jump() {
            currentYear = parseInt(document.getElementById("yearSelect").value);
            currentMonth = parseInt(document.getElementById("monthSelect").value);
            renderCalendar(currentMonth, currentYear);
        }

        function selectDay(element) {
            document.querySelectorAll('.day').forEach(d => d.classList.remove('selected'));
            element.classList.add('selected');
        }

        initApp();
    </script>
</body>
</html>
